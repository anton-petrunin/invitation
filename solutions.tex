%%!TEX root = invitation.tex
\backmatter
\chapter{Semisolutions}
\parbf{Exercise~\ref{ex:two-components-of-M4}.}
Let $\spc{X}$ be a 4-point metric space.

Fix a tetrahedron $\triangle$ in $\RR^3$.
The vertices of $\triangle$, 
say $x_0$, $x_1$, $x_2$, $x_3$, can be identified with the points of $\spc{X}$.

Note that there is unique quadratic form $W$ on $\RR^3$
such that 
\[W(x_i-x_j)=\dist[2]{x_i}{x_j}{\spc{X}}\]
for all $i$ and $j$;
here $\dist{x_i}{x_j}{\spc{X}}$ denotes the distance beween $x_i$ and $x_j$ in $\spc{X}$.

By the triangle inequality, $W(v)\ge 0$ 
for any vector $v$ parallel to one of the faces of $\triangle$.

Note that $\spc{X}$ is isometric to a 4-point subset in Euclidean space
if and only if $W(v)\ge 0$ for any vector $v$ in $\RR^3$.

\begin{wrapfigure}{r}{52mm}
\begin{lpic}[t(-2mm),b(1mm),r(0mm),l(0mm)]{pics/quad(1)}
\end{lpic}
\end{wrapfigure}

Therefore, if $\spc{X}$ is not of type $\mathcal{E}_4$ then $W(v)<0$ for some vector $v$.
From above, the vector $v$ must be transversal to each of the 4 faces of $\triangle$.
Therefore if we project $\triangle$ along $v$ to a plane transversal to $v$ we see one of these two pictures.

Note that the combinatorics of the picture do not depend on the choice of $v$. 
Hence $\mathcal{M}_4\backslash\mathcal{E}_4$ is not connected. 

It remains to show that if the combinatorics of the pictures for two spaces are the same then one can continuously deform one space into the other.
This can be easily done by deforming $W$ and applying a permutation of $x_0$, $x_1$, $x_2$, $x_3$ if necessary.
\qeds




\parbf{Exercise~\ref{ex:convex-set}.}
The simplest proof we know requires the construction of tangent cones for Alexandrov spaces.

\parbf{Exercise~\ref{ex:non-contracting-map}.}
This exercise is a basic introductory lemma on  Gromov--Hausdorff distance \cite[7.3.30]{BBI}.
We present the proof of Travis Morrison.

\medskip

Given any pair of point $x_0,y_0\in K$, 
consider two sequences $(x_n)$ and $(y_n)$
such that 
$x_{n+1}=f(x_n)$ and $y_{n+1}=f(y_n)$ for each $n$.

Since $K$ is compact, 
we can choose an increasing sequence of integers $n_i$
such that both sequences $(x_{n_i})_{i=1}^\infty$ and $(y_{n_i})_{i=1}^\infty$
converge.
In particular, both of these sequences  are Cauchy;
that is,
\[
|x_{n_i}-x_{n_j}|_K, |y_{n_i}-y_{n_j}|_K\to 0
\ \ 
\text{as}
\ \ \min\{i,j\}\to\infty.
\]


Since $f$ is non-contracting, we get
\[
|x_0-x_{|n_i-n_j|}|
\le 
|x_{n_i}-x_{n_j}|.
\]

It follows that  
there is a sequence $m_i\to\infty$ such that
\[
x_{m_i}\to x_0\ \ \text{and}\ \ y_{m_i}\to y_0\ \ \text{as}\ \ i\to\infty.
\leqno({*})\]

Set \[\ell_n=|x_n-y_n|_K.\]
Since $f$ is non-contracting, $(\ell_n)$ is a non-decreasing sequence.

By $({*})$,  $\ell_{m_i}\to\ell_0$ as $m_i\to\infty$.
It follows that $(\ell_n)$ is a constant sequence.

In particular 
\[|x_0-y_0|_K=\ell_0=\ell_1=|f(x_0)-f(y_0)|_K\]
for any pair of points $(x_0,y_0)$ in $K$.
That is, $f$ is distance preserving, in particular, injective.

From $({*})$, we also get that $f(K)$ is everywhere dense.
Since $K$ is compact, $f\:K\to K$ is surjective. Hence the result follows.\qeds


\parbf{Exercise~\ref{ex:product-cone}.} A point in $\RR\times \Cone \spc{U}$ can be described by a triple $(x,r,p)$, where $x\in \RR$, $r\in \RR_{\ge}$ and $p\in \spc{U}$.
Correspondingly, a point in $\Cone[\Susp\spc{U}]$ can be described by a triple $(\rho,\phi,p)$, where $\rho\in \RR_\ge$, $\phi\in [0,\pi]$ and $p\in \spc{U}$.

The map 
$\Cone[\Susp\spc{U}]\to\RR\times\Cone\spc{U}$ defined as
\[(\rho,\phi,p)\mapsto(\rho\cdot\cos\phi,\rho\cdot\sin\phi,p)\] 
is the needed isometry.\qeds

\parbf{Exercise~\ref{ex:no-geod}.}
The following example is essentially due to Fedor Nazarov, see \cite{nazarov}.

\medskip

Consider the unit ball $(B,d_0)$
in the space $c_0$ of all sequences converging to zero equipped with the sup-norm.

Consider another metric $d_1$ which is different from $d_0$ by the conformal factor
\[\phi(\bm{x})={2+\frac{x_1}2+\frac{x_2}4+\frac{x_3}8+\dots},\]
where $\bm{x}=(x_1,x_2\,\dots)\in B$.
That is, if $\bm{x}(t)$, $t\in[0,\ell]$ is a curve parametrized by $d_0$-length 
then its $d_1$-length is 
\[\length_1\bm{x}=\int\limits_0^\ell\phi\circ\bm{x}(t)\cdot dt.\]
Note that the metric $d_1$ is bi-Lipschitz to $d_0$.

Assume $\bm{x}(t)$ and $\bm{x}'(t)$ are two curves which differ only in the $m$-th coordinate, say $x_m(t)$ and $x_m'(t)$.
Note that if $x'_m(t)\le x_m(t)$ for any $t$ and 
the function $x'_m(t)$ is locally $1$-Lipschitz at all $t$ such that $x'_m(t)< x_m(t)$ then 
\[\length_1\bm{x}'\le \length_1\bm{x}.\]
Moreover this inequality is strict if $x'_m(t)< x_m(t)$ for some $t$.

Fix a curve $\bm{x}(t)$ parametrized by  arc-length $t\in[0,\ell]$ with respect to $d_0$.
We can choose $m$ large, so that $x_m(t)$ is sufficiently close to $0$ for any $t$.
In particular, for some values $t$, we have $y_m(t)<x_m(t)$, where
\[y_m(t)=(1-\tfrac t\ell)\cdot x_m(0)
+\tfrac t\ell\cdot x_m(\ell)
-\tfrac 1{100}\cdot \min\{t,\ell-t\}.\]
Consider the curve $\bm{x}'(t)$ as above with
\[x'_m(t)=\min\{x_m(t),y_m(t)\}.\]
Note that $\bm{x}'(t)$ and $\bm{x}(t)$ have the same end points and from above 
\[\length_1\bm{x}'<\length_1\bm{x}.\]
That is, for any curve $\bm{x}(t)$ in $(B,d_1)$, we can find a shorter curve $\bm{x}'(t)$ with the same end points.
In particular, $(B,d_1)$ has no geodesics.
\qeds

\parbf{Exercise~\ref{exercise from BH}.}
The following example is taken from \cite{BH}.

\medskip

Consider the following subset of $\R^2$:

\[
\spc{X}
=
\bigl((0,1]\times\{0,1\}\bigr)
\cup
\bigl(\bigcup_{n\ge 1}\{\tfrac1n\}\times[0,1]\bigr)
\]
Consider the induced length metric on $\spc{X}$. It is obviously locally compact and geodesic.

\begin{wrapfigure}{r}{22mm}
\begin{lpic}[t(-0mm),b(-1mm),r(0mm),l(0mm)]{pics/square(1)}
\lbl[r]{3,11;{\tiny $\dots$}}
\end{lpic}
\end{wrapfigure}

However, it is immediate to check that the metric completion \[\bar{\spc{X}}
=
\bigl([0,1]\times\{0,1\}\bigr)
\cup
\bigl(\bigcup_{n\ge 1}\{\tfrac1n\}\times[0,1]\bigr)\] 
is neither. \qeds 

\parbf{Exercise~\ref{ex:adjacent-angles}.}
Assume the contrary; that is
\[\mangle\hinge pxz+\mangle\hinge pyz< \pi.\]
By the  triangle inequality for angles (\ref{claim:angle-3angle-inq})
we have 
\[\mangle\hinge pxy<\pi.\]
The latter contradicts the triangle inequality for the triangle $\trig{\bar x}{p}{\bar y}$,
where the points
$\bar x\in \left]px\right]$ and $\bar y\in \left]py\right]$
are sufficiently close to $p$.\qeds

\begin{comment}

\parbf{Exercise~\ref{ex:geod-CBA}.}
Without loss of generality we can assume that $\kappa=1$.
Fix a sufficiently small $0<\eps<\pi$.

Recall that by Proposition~\ref{cor:loc-geod-are-min}, any local geodesic shorter than $\pi$ in  $\spc{U}$ is a geodesic.

Consider a sequence of directions $\xi_n$ of geodesics $[pq_n]$.
We can assume that the distances $\dist{p}{q_n}{\spc{U}}$ are equal to $\eps$ for all $n$;
here we use that the geodesics are extendable as local geodesics and minimizing up to length $\pi$.

Since $\spc{U}$ is proper,
the sequence $q_n$ has a partial limit, say $q$.
It remains to note that the direction $\xi$ of $[pq]$ is the limit of directions $\xi_n$,
assuming the latter is defined.\qeds

\end{comment}

\parbf{Exercise~\ref{ex:hausdorff-conv}.}
By the definition of the convergence
\[p\in A_\infty\quad\iff\quad\dist{A_n}{}{}(p)\to 0\quad\text{as}\quad n\to \infty.\] 
The latter is equivalent to existence of a sequence $p_n\in A_n$ such that
$\dist{p_n}{p}{}\to0$ as $n\to \infty$;
or equivalently $p_n\to p$.
Hence the first statement follows.

To show that the contrary does not hold,
consider the alternating sequence of two distinct closed sets $A,B,A,B,\dots$;
note that it is not a converging sequence in the sense of Hausdorff.
On the other hand, the set of all limit points is well defined and is the intersection $A\cap B$.\qeds

\parit{Remark.} The set $\ushort{A}_\infty$ of all limits  of sequences $p_n\in A_n$ is called the \emph{lower closed limit}
and the set $\bar{A}_\infty$ of all partial limits of such sequences is called the \emph{upper closed limit}.

Clearly $\ushort{A}_\infty\subset \bar{A}_\infty$.
If $\ushort{A}_\infty=\bar{A}_\infty$ then it is called  the \emph{closed limit} of $A_n$.

For the class of closed subsets of a proper metric space, closed limits coincide with limits in the sense of Hausdorff as we defined it.

All these notions were introduced by Felix Hausdorff in \cite{hausdorff}.



\parbf{Exercise~\ref{ex:compact-proper-GH}.}
Fix a countable dense set of points $\mathfrak{S}\subset\spc{X}_\infty$.
For each point $x\in \mathfrak{S}$, choose a sequence 
of points $x_n\in\spc{X}_n$ such that $x_n\xto{\rho} x$.

Applying a diagonal procedure, we can pass to a subsequence of $ \spc{X}_n$ such that each of the constructed sequences $\rho'$-converge;
that is, $x_n\xto{\rho'} x'$ for some $x'\in\spc{X}_\infty'$.

This way we get a map $\mathfrak{S}\to\spc{X}_\infty'$ defined as $x\mapsto x'$.
Note that this map preserves the distances and therefore it can be extended to a distance preserving map $\spc{X}_\infty\to\spc{X}_\infty'$.
Likewise we construct a distance preserving map $\spc{X}_\infty'\to\spc{X}_\infty$.

It remains to apply Exercise~\ref{ex:non-contracting-map}.
\qeds

\parbf{Exercise~\ref{ex:cone+susp}.}
Given a point $x\in \Cone\spc{U}$, denote by $x'$ its projection to $\spc{U}$
and by $|x|$ the distance from $x$ to the tip of the cone;
if $x$ is the tip then $|x|=0$ and we can take any point of $\spc{U}$ as $x'$.

Let $p$, $q$, $x$, $y$
be a quadruple in $\Cone\spc{U}$.
Assume that the spherical model triangles $\trig{\~p'}{\~x'}{\~y'}=\modtrig(p'x'y')_{\SS^2}$ and $\trig{\~q'}{\~x'}{\~y'}=\modtrig(q'x'y')_{\SS^2}$ are defined.
Consider the following points in $\EE^3=\Cone\SS^2$: 
\begin{align*}
\~p&=|p|\cdot\~p',
&
\~q&=|q|\cdot\~q',
&
\~x&=|x|\cdot\~x',
&
\~y&=|y|\cdot\~y'.
\end{align*}

Note that
$\trig{\~p}{\~x}{\~y}\iso\modtrig(pxy)_{\EE^2}$
and
$\trig{\~q}{\~x}{\~y}\iso\modtrig(qxy)_{\EE^2}$.
Further note that if $\~z\in [\~x\~y]$ then
$\~z'=\~z/|\~z|$ lies on the geodesic $[\~x'\~y']$ in $\SS^2$.

The $\Cat{}{1}$ comparison for $\dist{p'}{q'}{}$ with $\~z'\in[\~x'\~y']$ implies the 
$\Cat{}{0}$ comparison for $\dist{p}{q}{}$ with $\~z\in[\~x\~y]$.

The converse statement also holds, where 
the $\Cat{}{0}$ comparison is applied to a quadruple of points $s=a\cdot p$, $q$, $x$, $y$ with $a\ge 0$ chosen so  that the corresponding points 
$\~s=a\cdot \~p$, $\~q$, $\~x$, $\~y$ lie in one plane.
\qeds

\parbf{Exercise~\ref{ex:product}.}
Fix a quadruple 
\begin{align*}
p&=(p_1,p_2),
&
q&=(q_1,q_2), 
&
x&=(x_1,x_2),
&
y&=(y_1,y_2)
\end{align*}
in $\spc{U}\times \spc{V}$.
For the quadruple $p_1,q_1,x_1,y_1$ in $\spc{U}$,
construct two model triangles $\trig{\~p_1}{\~x_1}{\~y_1}=\modtrig(p_1x_1y_1)_{\EE^2}$ 
and $\trig{\~q_1}{\~x_1}{\~y_1}=\modtrig(q_1x_1y_1)_{\EE^2}$.  
Similarly, for the quadruple $p_2,q_2,x_2,y_2$ in $\spc{V}$
construct two model triangles $\trig{\~p_2}{\~x_2}{\~y_2}$ and $\trig{\~q_2}{\~x_2}{\~y_2}$.

Consider four points in $\EE^4=\EE^2\times\EE^2$ 
\begin{align*}
\~p&=(\~p_1,\~p_2),
&
\~q&=(\~q_1,\~q_2),
&
\~x&=(\~x_1,\~x_2),
&
\~y&=(\~y_1,\~y_2).
\end{align*}
Note that the triangles $\trig{\~p}{\~x}{\~y}$ and $\trig{\~q}{\~x}{\~y}$ in $\EE^4$ are isometric to the model triangles 
$\modtrig(pxy)_{\EE^2}$ and $\modtrig(qxy)_{\EE^2}$.

If $\~z=(\~z_1,\~z_2)\in [\~x\~y]$ we have then $\~z_1\in [\~x_1\~y_1]$ and $\~z_2\in [\~x_2\~y_2]$ and
\begin{align*}
\dist[2]{\~z}{\~p}{\EE^4}&=\dist[2]{\~z_1}{\~p_1}{\EE^2}+\dist[2]{\~z_2}{\~p_2}{\EE^2},
\\
\dist[2]{\~z}{\~q}{\EE^4}&=\dist[2]{\~z_1}{\~q_1}{\EE^2}+\dist[2]{\~z_2}{\~q_2}{\EE^2},
\\
\dist[2]{p}{q}{\spc{U}\times\spc{V}}&=\dist[2]{p_1}{q_1}{\spc{U}}+\dist[2]{p_2}{q_2}{\spc{V}}.
\end{align*}
Therefore $\Cat{}{0}$ comparison for the quadruples $p_1,q_1,x_1,y_1$ in $\spc{U}$
and 
$p_2,q_2,x_2,y_2$ in $\spc{V}$ implies the 
$\Cat{}{0}$ comparison for the quadruples $p,q,x,y$ in $\spc{U}\times \spc{V}$.\qeds

\parbf{Exercise~\ref{ex:CAT-geodesic}.}
According to Lemma~\ref{lem:mid>geod}, it is sufficient to prove the existence of a midpoint for two given points $x$ and $y$.

For each $n$ choose a $\tfrac1n$-midpoint $z_n$;
that is, a point such that
\[\dist{x}{z_n}{},\dist{y}{z_n}{}\le \tfrac12\cdot\dist{x}{y}{}+\tfrac1n.\]

From the $\Cat{}{0}$ comparison inequality for the quadruple $x$, $y$, $z_n$, $z_m$ we have that $\dist{z_m}{z_n}{}\to0$ as $n,m\to\infty$;
that is, $z_n$ is Cauchy and hence converges.

Since the space is complete the sequence $z_n$ has a limit, say $z$, which is clearly a midpoint for the pair $x$ and $y$.\qeds 

\parbf{Exercise~\ref{ex:geod-CBA}.}
Without loss of generality we can assume that $\kappa=1$.
Fix a sufficiently small $0<\eps<\pi$.

Recall that by Proposition~\ref{cor:loc-geod-are-min}, any local geodesic shorter than $\pi$ in  $\spc{U}$ is a geodesic.

Consider a sequence of directions $\xi_n$ of geodesics $[pq_n]$.
We can assume that the distances $\dist{p}{q_n}{\spc{U}}$ are equal to $\eps$ for all $n$;
here we use that the geodesics are extendable as local geodesics and minimizing up to length $\pi$.

Since $\spc{U}$ is proper,
the sequence $q_n$ has a partial limit, say $q$.
It remains to note that the direction $\xi$ of $[pq]$ is the limit of directions $\xi_n$,
assuming the latter is defined.\qeds


\begin{wrapfigure}{r}{39mm}
\begin{lpic}[t(-2mm),b(0mm),r(0mm),l(0mm)]{pics/resh(1)}
\lbl[t]{17.5,.5;$\~p$}
\lbl[b]{2,27.5;$\~x$}
\lbl[b]{30,27.5;$\~y$}
\lbl[b]{17,27.5;$\~z$}
\lbl[b]{12.5,18;$\~z_x$}
\lbl[b]{21,18;$\~z_y$}
\end{lpic}
\end{wrapfigure}
\parbf{Exercise~\ref{ex:short-map}.}
By Alexandrov's lemma (\ref{lem:alex}), 
there are nonoverlapping triangles 
\[\trig{\~p}{\~x}{\~z_x}\iso\trig {\dot p}{\dot x}{\dot z}\] 
and 
\[\trig{\~p}{\~y}{\~z_y}\iso\trig {\dot p}{\dot y}{\dot z}\]
inside the  triangle $\trig{\~p}{\~x}{\~y}$.

Connect  the points in each pair
$(\~z,\~z_x)$, 
$(\~z_x,\~z_y)$ 
and $(\~z_y,\~z)$ 
with arcs of circles centered at 
$\~y$, $\~p$, and $\~x$ respectively. 
Define $F$ as follows.
\begin{itemize}
\item Map  $\Conv\trig{\~p}{\~x}{\~z_x}$ isometrically onto  $\Conv\trig {\dot p}{\dot x}{\dot z}$;
similarly map $\Conv \trig{\~p}{\~y}{\~z_y}$ onto $\Conv \trig {\dot p}{\dot y}{\dot z}$.
\end{itemize}

\begin{itemize}
\item If $x$ is in one of the three circular sectors, say at distance $r$ from center of the circle, let $F(x)$ be the point on the corresponding segment 
$[p z]$, 
$[x z]$ 
or $[y z]$ whose distance from the lefthand endpoint of the segment is $r$.
\item Finally, if $x$ lies in the remaining curvilinear triangle $\~z \~z_x \~z_y$, 
set $F(x) = z$. 
\end{itemize}
By construction, $F$ satisfies the conditions. \qeds

\parbf{Exercise~\ref{ex:convex-balls}.}
For    $\Cat{}{0}$, the statement follows from convexity of distance functions to points in $\EE^2$, and thinness of triangles.
For  $\Cat{}{1}$,  the statement  follows from  thinness of triangles and convexity of balls of radius $<\pi/2$ in $\SS^2$.
\begin{comment}
It is sufficient to show that 
\[\dist{p}{z}{}\le \max\{\dist{p}{x}{},\dist{p}{y}{}\}\]
for any $p$ and any $z\in[xy]$.

The statement follows since the triangle $\trig pxy$ is thin
and the above condition holds in the Euclidean plane.

In $\Cat{}{1}$ case, the proof is the same, but we need to assume in addition that 
$\max\{\dist{p}{x}{},\dist{p}{y}{}\}\le \tfrac\pi2$.\qeds
\end{comment}
\parbf{Exercise~\ref{ex:locally-convex}.}
Denote by $K$ a closed, connected, locally convex set.
Note that by Corollary \ref{cor:dist-convex}, $\dist{K}{}{}$ is convex in a neighborhood $\Omega\supset K$, that is, convex along any geodesic completely contained in $\Omega$.

Since $K$ is locally convex,
it is locally path connected.
Since $K$ is connected and locally path connected, $K$ is path connected.

Fix two points $x,y\in K$. 
Let us connect $x$ to $y$ by a path $\alpha\:[0,1]\to K$.
By Theorem~\ref{thm:cat-unique}, the geodesic $[x\alpha(s)]$ 
is uniquely defined and depends continuously on $s$.

If $[xy]=[x\alpha(1)]$ does not completely lie in $K$ then 
there is a value $s\in [0,1]$ such that $[x\alpha(s)]$ 
lies in $\Omega$,
but does not completely lie in $K$.
Therefore $f=\dist{K}{}{}$ is convex 
along $[x\alpha(s)]$.
Note that $f(x)=f(\alpha(s))=0$ and $f\ge 0$, 
therefore $f(x)= 0$ for any $x\in [x\alpha(s)]$;
that is, $x\in K$, a contradiction.\qeds


\parbf{Exercise~\ref{ex:closest-point}.}
Since $\spc{U}$ is proper, the set $K\cap \cBall[p,R]$ is compact for any $R<\infty$.
Hence the existence of at least one point $p^*$ that minimizes the distance from $p$ follows.

Assume $p^*$ is not uniquely defined;
that is,  two distinct points in $K$, say $x$ and $y$, minimize the distance from $p$.
Since $K$ is convex, the midpoint $z$ of $[xy]$ lies in $K$.

Note that $\dist{p}{z}{}<\dist{p}{x}{}=\dist{p}{y}{}$, a contradiction.

It remains to show that the map $p\mapsto p^*$ is short, 
that is, 
\[\dist{p}{q}{}\ge \dist{p^*}{q^*}{}.\eqlbl{eq:short-p-p}\]

Note that 
\[\mangle\hinge{p^*}{p}{q^*}\ge \tfrac\pi2
\quad
\text{and}
\quad
\mangle\hinge{q^*}{p}{p^*}\ge \tfrac\pi2,\] 
if the lefthand sides are defined. 


Construct the model triangles 
$\trig{\~p}{\~p^*}{\~q^*}$ and $\trig{\~p}{\~q}{\~q^*}$
of $\trig{p}{p^*}{q^*}$ and $\trig{p}{q}{q^*}$ so that 
the points $\~p^*$ and $\~q$ lie on the opposite sides from $[{\~p}{\~q^*}]$.

By comparison and the triangle inequality for angles \ref{claim:angle-3angle-inq}, we get 
\[\mangle\hinge{\~p^*}{\~p}{\~q^*}\ge \mangle\hinge{p^*}{p}{q^*}\ge \tfrac\pi2
\quad
\text{and}
\quad
\mangle\hinge{\~q^*}{\~q}{\~p^*}\ge \mangle\hinge{q^*}{q}{p^*}\ge \tfrac\pi2,
\]
assuming the left hand sides are defined. 
Hence 
\[\dist{\~p}{\~q}{}\ge \dist{\~p^*}{\~q^*}{}.\]
The latter is equivalent to \ref{eq:short-p-p}.\qeds

\parbf{Exercise~\ref{ex:supporting-planes}.}
By approximation, it is sufficient to consider the case when 
$A$ and $B$ have smooth boundary. 
If $[xy]\cap A\cap B\ne \emptyset$ then $z_0\in [xy]$ and $\dot A, \dot B$ can be chosen to be arbitrary half-spaces containing $A$ and $B$ respectively.  

Suppose $[xy]\cap A\cap B=\emptyset$. 
Then $z_0\in\partial (A\cap B)$.  
Let \[C=\set{z\in\EE^m}{f(z)\le f(z_0)}.\] 
Note that $C$ is compact, convex and has  smooth boundary. 
Suppose $z_0\in\partial  A \cap \Int B$. 
Then $A$ and $C$ touch at $z_0$ and we can set $\dot A$ to be the uniquely defined supporting half-space to $A$  at $z_0$ and $\dot B$ to be any half-space containing $B$. 
The case $z_0\in\partial B \cap \Int A$ is treated similarly.


Finally, suppose
 $z_0\in\partial A\cap\partial B$. Then  set  $\dot A$ ($\dot B$)  to be the uniquely defined supporting half-space to $A$ ($B$) at $z_0$ containing $A$ ($B$).  
\qeds

\begin{wrapfigure}[12]{r}{44mm}
\begin{lpic}[t(-3mm),b(0mm),r(0mm),l(0mm)]{pics/compact-walls(1)}
\lbl[tr]{21,7.5;$0$}
\lbl[tr]{10,20;$A^i$}
\lbl[tr]{34,12;$A^j$}
\end{lpic}
\end{wrapfigure}

\parbf{Exercise~\ref{ex:compact-walls}.}
Fix $r>0$ and $R<\infty$ so that 
\[\oBall(0,r)\subset A^i\subset \oBall(0,R)\]
for each wall $A^i$.

It remains to note that all the intersections of  the walls  have $\eps$-wide corners for
\[\eps=2\cdot \arcsin\tfrac rR.\]
\qedsf

\parbf{Exercise~\ref{ex:centrally-simmetric-walls}.}
Note that there is $R<\infty$
such that if $X$ is an intersection of an arbitrary number of walls,  then for any point $p\in X$ there is an isometry of $X$ 
which moves  $p$ to a point in $\oBall(0,R)$.

The rest of the proof is the same as in  Exercise~\ref{ex:compact-walls}.\qeds

\parbf{Exercise~\ref{ex:null-homotopic}.}
Note that the existence of a null-homotopy is equivalent to the following.
There are two one-parameter families of paths $\alpha_\tau$ and $\beta_\tau$, $\tau\in[0,1]$ 
such that 
\begin{itemize}
\item $\length\alpha_\tau$, $\length\beta_\tau<\pi$ for any $\tau$.
\item $\alpha_\tau(0)=\beta_\tau(0)$ and $\alpha_\tau(1)=\beta_\tau(1)$ for any $\tau$.
\item $\alpha_0(t)=\beta_0(t)$ for any $t$.
\item $\alpha_1(t)=\alpha(t)$ and $\beta_1(t)=\beta(t)$ for any $t$.
\end{itemize}

By Corollary~\ref{cor:discrete-paths},
the construction in Corollary~\ref{cor:path-geod} produces the same result for $\alpha_\tau$ and $\beta_\tau$.
Hence the result follows.\qeds

\parbf{Exercise~\ref{ex:geod-circle}.}
The following proof works for compact locally simply connected metric spaces;
by uniqueness of geodesics (\ref{thm:cat-unique}) 
this class of spaces includes compact locally $\Cat{}{\kappa}$ length spaces.  In this setting, one assumes there is  a nontrivial homotopy class of curves (shorter than $2\pi$ in the $\Cat{}{1}$ case).

Consider a shortest noncontractible closed curve $\gamma$ in the space.
(Note that it exists.)

Assume that $\gamma$ is not a geodesic circle,
that is,  there are two points $p$ and $q$ on $\gamma$ such that the distance $\dist{p}{q}{}$ 
is shorter then the lengths of the arcs, say $\alpha_1$ and $\alpha_2$, of $\gamma$ from $p$ to $q$.
Consider the products, say $\gamma_1$ and $\gamma_2$,
of $[qp]$ with $\alpha_1$ and $\alpha_2$.
Note that
\begin{itemize}
 \item  $\gamma_1$ or $\gamma_2$ is noncontractible,
 \item $\length\gamma_1, \length\gamma_2<\length \gamma$,
\end{itemize}
a contradiction.\qeds


\parbf{Exercise~\ref{ex:unique-geod=CAT}.}
Assume $\spc{P}$ is not $\Cat{}{0}$. Then
by Theorem~\ref{thm:PL-CAT},  a link $\Sigma$ of some simplex contains a closed geodesic $\alpha$ with length $4\cdot\ell<2\cdot\pi$.
Divide $\alpha$ into two equal arcs $\alpha_1$ and $\alpha_2$
parametrized by $[-\ell,\ell]$

Fix a small $\delta>0$ and 
consider two curves in $\Cone\Sigma$ written in polar coordinates as 
\[\gamma_i(t)=(\alpha_i(\tan \tfrac t\delta),\sqrt{\delta^2+t^2}).\]
Note that both form geodesics in $\Cone\Sigma$ and  have common ends.

Finally note that a small neighborhood of the tip of $\Cone\Sigma$ admits an isometric embedding into $\spc{P}$.
Hence the statement follows.\qeds

\parbf{Advanced exercise~\ref{ex:S3}.}
It is sufficient to construct a polyhedral space $\spc{P}$ homeomorphic to the 3-disc such that (1) $\spc{P}$ is locally $\Cat{}{0}$ in its interior and (2) the boundary of $\spc{P}$ is locally concave; in particular, each edge on the boundary of $\spc{P}$ has angle at least $\pi$.
Once $\spc{P}$ is constructed, taking the double of $\spc{P}$ along its boundary produces the needed metric on $\mathbb{S}^3$.

The construction of $\spc{P}$ goes along the same lines as the construction of a Riemannian metric on the 3-disc with concave boundary and negative sectional curvature. 
This construction is given by Joel Hass in \cite{hass}.
\qeds

By the globalization theorem (\ref{thm:hadamard-cartan}) the obtained metric on $\mathbb{S}^3$ is not locally $\Cat{}{0}$.
This problem originated from a discussion 
in Oberwolfach
between
Brian Bowditch,
Tadeusz Januszkiewicz,
Dmitri Panov
and 
the third author.


\parbf{Exercise~\ref{ex:baricenric-flag}.}
Checking the flag condition is straightforward once we know the following description of the barycentric subdivision.

Each vertex $v$ of the barycentric subdivision 
corresponds to a simplex $\triangle_v$ of the original triangulation.
A set of vertices forms a simplex in the subdivision 
if it can be ordered, say as $v_1,\dots,v_\kay$,
so that the corresponding simplices form a nested sequence
\[\triangle_{v_1}\subset\dots\subset\triangle_{v_\kay}.\]
\qedsf



\parbf{Exercise~\ref{ex:flag>=pi/2}.}
Use induction to prove that if in a spherical simplex $\triangle$ every edge is at least $\tfrac\pi2$ then 
all dihedral angles of $\triangle$ are at least~$\tfrac\pi2$.

The rest of the proof goes along the same lines as the proof of the flag condition (\ref{thm:flag}).
The only difference is that a geodesic may spend time \emph{more than} $\pi$ in the star of each vertex.
\qeds

Note that it is not sufficient to assume only that the all dihedral angles of the simplices are at least $\tfrac\pi2$. 

\parbf{Exercise~\ref{ex:tree}.}
The space $\spc{T}_n$ has a natural cone structure with the vertex formed by the  completely degenerate tree --- all its edges have zero length.
Note that the space $\Sigma$, 
over which the cone is taken comes naturally with a triangulation 
with all-right spherical simplicies.

It remains to check that the complex is flag 
and apply 
the flag condition (\ref{thm:flag}) with Exercise~\ref{ex:cone+susp}.
%%%???please check English and remove this note
\qeds

\parbf{Exercise~\ref{ex:flag-aspherical}.}
If the complex $\mathcal{S}$ is flag then its cubical analog $\square_{\mathcal{S}}$ is locally $\Cat{}{0}$ and therefore aspherical.

Assume now that the complex $\mathcal{S}$ is not flag. 
Extend it to a flag complex $\mathcal{T}$ by gluing a simplex in every complete subgraph of its 1-skeleton.

Note that the cubical analog $\square_{\mathcal{S}}$ is a proper subcomplex in $\square_{\mathcal{T}}$.
Since $\mathcal{T}$ is flag,
$\tilde\square_{\mathcal{T}}$,
the universal cover of $\square_{\mathcal{T}}$, is $\Cat{}{0}$.

Choose a minimal  cube $Q$ in $\tilde\square_{\mathcal{T}}$ which is not present in $\tilde\square_{\mathcal{S}}$.
By Exercise~\ref{ex:locally-convex}, $Q$ is a convex set in $\tilde\square_{\mathcal{T}}$.
The closest point projection $\tilde\square_{\mathcal{T}}\to Q$ is a retraction.
It follows that the boundary $\partial Q$ is not contractible in $\tilde\square_{\mathcal{T}}\backslash\Int Q$ and therefore it is also not contractible in $\tilde\square_{\mathcal{S}}$.
\qeds

\parbf{Exercise~\ref{ex:example-pi_infty-new}.}
The solution goes along the same lines as the proof of Lemma~\ref{lem:example-pi_infty}.

The only difference is that $G$
is not a subcomplex of the cubical analog.
It has to be made from the squares parallel to the squares of the cubical complex which meet the edges of the complex orthogonally at their midpoints. \qeds

\parbf{Exercise~\ref{ex:funny-S}.}
In the proof we apply the following lemma from \cite{edwards}; 
it follows from the disjoint discs property.

\medskip

\parbf{Lemma.}
\emph{Let $\spc{S}$ be a finite simplicial complex which 
is homeomorphic to an $m$-dimensional homology manifold for some $m\ge 5$.
Assume that  all vertices of
$\spc{S}$ have simply connected links.
Then $\spc{S}$ is a topological manifold.}

\medskip


It is sufficient to construct a simplicial complex $\spc{S}$
such that 
\begin{itemize}
\item $\spc{S}$ is a closed $(m-1)$-dimensional homology manifold;
\item $\pi_1(\spc{S}\backslash\{v\})\ne0$ for some vertex $v$ in $\spc{S}$;
\item $\spc{S}\sim \mathbb{S}^{m-1}$; that is, $\spc{S}$ is homotopy equivalent to $\mathbb{S}^{m-1}$.
\end{itemize}

Indeed, assume such $\spc{S}$ is constructed.
Then the suspension
$\spc{R}\z=\Susp\spc{S}$
is an $m$-dimensional homology manifold with a natural triangulation coming from $\spc{S}$.
According to the lemma,
$\spc{R}$ is a topological manifold.
According to the generalized Poincar\'{e} conjecture,
$\spc{R}\simeq\mathbb{S}^m$;
that is
$\spc{R}$ is homeomorphic to $\mathbb{S}^m$.
Since $\Cone \spc{S}\simeq \spc{R}\backslash\{s\}$ where $s$ denotes a south pole of the suspension 
and $\EE^m\simeq \mathbb{S}^m\backslash\{p\}$
for any point $p\in \mathbb{S}^m$
we get 
\[\Cone \spc{S}\simeq\EE^m.\]

Let us construct $\spc{S}$.
Fix an $(m-2)$-dimensional homology sphere $\Sigma$ with a triangulation such that $\pi_1\Sigma\ne0$.
An example of that type exists for any $m\ge 5$; a proof is given in \cite{kervaire}.

Remove from $\Sigma$ one $(m-2)$-simplex.
Denote the resulting complex by $\Sigma'$.
Since $m\ge 5$, we have $\pi_1\Sigma=\pi_1\Sigma'$.

Consider the product $\Sigma'\times [0,1]$. 
Attach to it the cone over its boundary $\partial (\Sigma'\times [0,1])$.
Denote by $\spc{S}$ the resulting simplicial complex
and by $v$ the tip of the attached cone.

Note that $\spc{S}$ is homotopy equivalent to the spherical suspension over $\Sigma$, which is a simply connected homology sphere and hence is homotopy equivalent to $\mathbb{S}^{m-1}$.
  Hence  $\spc{S}\sim\mathbb{S}^{m-1}$.

The complement $\spc{S}\backslash\{v\}$ is homotopy equivalent to $\Sigma'$.
Therefore 
\[
\pi_1(\spc{S}\backslash\{v\})
=\pi_1\Sigma'
=\pi_1\Sigma\ne 0.
\]
That is, $\spc{S}$ satisfies the conditions above.
\qeds

\parbf{Exercise~\ref{ex:concave-triangle}.}
By approximation,
it is sufficient to consider the case when $S$ has polygonal sides.

The latter case can be done by induction on the number of sides.
The base case of triangle is evident.

To prove the induction step, apply Alexandrov's lemma (\ref{lem:alex}) 
together with the construction in Exercise~\ref{ex:short-map}.
\qeds

\parbf{Exercise~\ref{ex:bishop-sphere}.}
Unlike in the plane, the sphere contains diangular and triangular regions whose sides are concave in the sphere.
To adapt the proof of Theorem~\ref{thm:bishop-plane}
we use Exercise~\ref{ex:hemisphere}.

From  Exercise~\ref{ex:hemisphere}, it follows that if such a concave diangle or triangle has perimeter smaller then $2\cdot\pi$ then it contains a closed hemisphere in its interior.

By the assumption, $\Theta$ does not contain a closed hemisphere. 
Therefore the argument in the proof of Theorem~\ref{thm:bishop-plane} shows that any triangle in $\tilde\Theta$ with perimeter less than $2\cdot\pi$ is spherically thin. 
\qeds


\parbf{Exercise~\ref{ex:two-planes}.}
The space $K$ forms a cone over the branched covering $\Sigma$ of $\mathbb{S}^3$ infinitely branching along two great circles.

If the planes are not orthogonal then the minimal distance between the circles is less than $\tfrac\pi2$.
Assume that this distance is realized by a geodesic $[\xi\zeta]$.
The broken line made by four liftings of $[\xi\zeta]$ forms a closed 
local
geodesic in $\Sigma$. 
By Proposition~\ref{cor:loc-geod-are-min},
(or Corollary~\ref{cor:closed-geod-cat}) 
$\Sigma$ is not $\Cat{}{1}$.
Therefore by Exercise~\ref{ex:cone+susp}, $K$ is not $\Cat{}{0}$.

If the planes are orthogonal then the corresponding great circles in $\SS^3$ are formed by subcomplexes of a flag triangulation of $\SS^3$ with all-right simplicies.
The branching cover is also flag.
It remains to apply the flag condition \ref{thm:flag}.

\parit{Comments.}
In \cite{charney-davis-93}, Ruth Charney and Michael Davis
gave a complete answer to the analogous question for three planes.
In particular they show that if a covering space of $\EE^4$
branching at three planes passing the origin is $\Cat{}{0}$ then these all are complex planes for some complex structure on $\EE^4$.
\qeds

\parbf{Exercise~\ref{ex:hemisphere}.}
Let $\alpha$ be a closed curve in $\SS^2$ of length $2\cdot\ell$.

Assume $\ell<\pi$.
Let $\check\alpha$ be a subarc of $\alpha$ of length $\ell$, with endpoints $p$ and $q$. 
Since $\dist{p}{q}{}\le\ell<\pi$, there is a unique geodesic $[pq]$ in $\SS^2$.  
Let $z$ be the midpoint of  $[pq]$.  
We claim that $\alpha$ lies in the open hemisphere centered at $z$.  
If not, $\alpha$ intersects the boundary  great circle in a point say $r$.
Without loss of generality we may assume that $r\in\check\alpha$.

The arc $\check\alpha$ together with its reflection in $z$ form a closed curve of length $2\cdot \ell$ which passes $r$ and its antipodal point $r'$.
Thus $\ell=\length \check\alpha\ge \dist{r}{r'}{}=\pi$, a contradiction.
\qeds

\parit{A solution via Crofton formula.}
Let $\alpha$ be a closed curve in  $\SS^2$ of length $\le 2\cdot\pi$.  We wish to prove $\alpha$ is contained in a hemisphere in $\SS^2$.
By approximation it suffices to prove this for  smooth curves $\alpha$ of length $< 2\cdot\pi$ with transverse self-intersections. 

Given $v\in \SS^2$, denote by $v^\perp$ the equator in $\SS^2$ with the pole at $v$.
Further, $\# X$ will denote the number of points in the set $X$.

Obviously,  if $\#(\alpha\cap v^\perp) =0$ then $\alpha$ is contained in one of the hemispheres determined by $v^\perp$. 
Note that $\#(\alpha\cap v^\perp)$ is even for almost all $v$.

Therefore, if $\alpha$ does not lie in a hemisphere then
$\#(\alpha\cap v^\perp) \ge 2$ for almost all $v\in\SS^2$.  

By Crofton's formula we have that
\begin{align*}
\length(\alpha)
&=\frac 1 4\cdot \int\limits_{\SS^2}\#(\alpha\cap v^\perp)\cdot \d_v\area\ge
\\
&\ge2\cdot\pi.
\end{align*}
\qedsf


\begin{wrapfigure}{r}{43mm}
\begin{lpic}[t(-0mm),b(-3mm),r(0mm),l(0mm)]{pics/inner-support(1)}
\lbl[t]{40,.5;$W_0$}
\lbl[t]{27,.5;$\Gamma$}
\lbl[br]{12,12;$p$}
\lbl{14,6;$R$}
\lbl[tl]{27,17;$W$}
\end{lpic}
\end{wrapfigure}

\parbf{Exercise~\ref{ex:inner-support}.}
Since  $\Omega$ is not two-convex, 
by definition there is a simple closed curve $\gamma$ which lies in the intersection of a plane $W_0$ and $\Omega$, 
and is contractible in $\Omega$ but not contractible in $\Omega\cap W_0$.

Let $\phi\:\DD\to \Omega$ be a disc which shrinks $\gamma$.
Applying the loop theorem (arguing as in the proof of Proposition~\ref{prop:3d-strong-2-convexity}), we can assume that $\phi$ is an embedding and $\phi(\DD)$ lies on one side of $W_0$.

Let $Q$ be the bounded domain cut from $\EE^3$ by $\phi(\DD)$ and $W_0$. 
By assumption it contains a point which is not in $\Omega$. 
Changing $W_0,\gamma$ and $\phi$ slightly, we can assume that such a point lies in the interior of $Q$.

Fix a circle $\Gamma$ in $W_0$ which surrounds $Q\cap W_0$.
Since $Q$ lies in a half-space with boundary $W_0$, there is a
smallest spherical dome with boundary $\Gamma$ which includes the set $R=Q\backslash\Omega$.
The dome has to touch $R$ at some point $p$.
The plane $W$ tangent to the dome at $p$ has the required property --- the point $p$ is an isolated point of the complement $W\backslash \Omega$.\qeds

\parbf{Exercise~\ref{ex:convex+saddle+broken=>PL}.}
Consider the surface $S$ 
formed by the closure of the remaining part of the boundary.
Note that the boundary $\partial S$ of $S$ is formed by some number of broken lines.

Assume $S$ is not piecewise linear.
Show that there is a line segment $[pq]$ in $\EE^3$ tangent to $S$ at $p$ which has no common points with $S$ except $p$.

Since $S$ is locally concave,
there is a local inner supporting plane $\Pi$ at $p$ which contains the segment $[pq]$.

Note that $\Pi\cap S$ contains a segment $[xy]$ passing $p$ with the ends at $\partial S$.

Show that there is a line segment of $\partial S$ starting at $x$ or $y$ which lies in $\Pi$.

From the latter statement and local convexity of $S$, 
all points of $[pq]$ sufficiently close to $p$ lie in $S$,
a contradiction.
\qeds


\parbf{Exercise~\ref{ex:CAT=>two-convex}.}
Show that if $K$ is not two-convex then there is a plane triangle $\triangle$ whose sides lie completely in $K$, 
but its interior contains some points from  the complement $\EE^m\backslash K$.

It remains to note that $\triangle$ is not thin in $K$.
\qeds

\parbf{Exercise~\ref{ex:two-convex-not-a-CAT}.}
Clearly the set $W$ is two-convex.
Therefore $K$ is two-convex as an intersection of two-convex sets.

The set $K$ on large scale looks like the complement of two 3-dimensional half-spaces in $\EE^4$.
More precisely, the Gromov-Hausdorff limit $K'$ of $\tfrac1n\cdot K$  as $n\to\infty$ is 
the completion of the complement, equipped with length metric, 
 of the union of half-spaces in two 3-dimensional spaces in $\EE^4$ passing $0$. 
In particular $K'$ is a cone over a space $\Sigma$ which 
can be obtained as the completion of the sphere $\SS^3$ with  two 2-dimensional hemispheres, say $H_1$ and $H_2$, removed.
The intersection of these hemispheres is typically formed by a geodesic segment, say $[\xi\zeta]$.

Consider  hemispheres $H_1$ and $H_2$ for which $[\xi\zeta]$ is orthogonal to the boundary spheres and has length less than $\tfrac\pi2$.
Then the projection of a closed geodesic in $\Sigma$ to $\SS^3$
is formed by a product of four copies of $[\xi\zeta]$.
In particular there is a closed geodesic in $\Sigma$ shorter than $2\cdot\pi$.
Hence $\Sigma$ is not $\Cat{}{1}$ 
and therefore $K'$ and consequently $K$ are not $\Cat{}{0}$.
\qeds

\parbf{Exercise~\ref{ex:branching-cover}.}
Consider an $\eps$-neighborhood $A$ of the geodesic.
Note that $A_\eps$ forms a convex set.
By Reshetnyak's gluing theorem the doubling $\spc{W}_\eps$ of $\spc{U}$ along $A_\eps$ is a $\Cat{}{0}$ space.

Next, consider the space $\spc{W}'_\eps$ obtained by doubly covering $\spc{U}\backslash A_\eps$ and gluing back $A_\eps$.

Note that $\spc{W}'_\eps$ is locally isometric to $\spc{W}_\eps$. 
That is, for any point $p'\in\spc{W}'_\eps$ there is a point $p\in\spc{W}_\eps$ such that the $\delta$-neighborhood of $p'$ is isometric to the $\delta$-neighborhood of $p$ for all small $\delta>0$.

Further note that $\spc{W}'_\eps$ is simply connected since it admits a deformation retraction onto $A_\eps$, which is contractible.
By the globalization theorem, $\spc{W}'_\eps$ is $\Cat{}{0}$.

It remains to note that $\~{\spc{U}}$ can be obtained as a limit of $\spc{W}'_\eps$ as $\eps\to 0$, and apply Proposition~\ref{prop:cat-limit}.
\qeds


